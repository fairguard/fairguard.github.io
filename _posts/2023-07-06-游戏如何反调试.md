---
layout: post
title: "游戏如何反调试"
date: 2023-07-06 16:26:10 +0800
categories: 游戏安全
tags: Frida  反调试  反注入
---

近来年，游戏黑灰产攻击趋势呈现出角度多样化的特点。据FairGuard游戏安全数据分析发现，游戏黑灰产攻击以工作室、定制注入挂、内存修改器、模拟点击、破解等形式为主。<!-- more -->  

![315_21](/assets/res/202103/游戏安全风险占比.png)  
FairGuard数据统计：游戏安全风险占比  

对于一款游戏而言，上述的风险中，被破解造成的后果是最为严重的。一款游戏被破解，也就意味着游戏内的代码逻辑、资源文件存在被破解者分析、篡改、植入/剔除模块的可能。  

流出的破解版会破坏游戏的公平性，造成正版玩家大量流失，导致游戏方收益受损，且存在游戏内的代码、美术资源被盗用、剧透的风险。  

![315_21](/assets/res/202103/ohayoo案例.png)  
因游戏被破解造成严重损失的案例  

随着游戏安全对抗强度的提升，黑灰产的破解手段也进化为静态分析与动态调试相结合的形式。破解者可通过逆向分析手段对游戏进行静态分析、动态调试，修改游戏客户端代码逻辑来制作「破解版」，甚至还可直接修改游戏端整体代码逻辑实现「私服」来分取游戏利益。  

相比外挂，破解对游戏造成的影响更加恶劣。游戏破解版的制作门槛在一些工具的加持下更加简单，通过frida、IDA等工具就可对游戏进行调试分析制作破解版等。  

![315_21](/assets/res/202103/frida流程.png)  
frida调试框架操作流程  

如市面上常见的调试框架frida。基于Python和JavaScript的frida，具备调试效率高、应用面广的特点。可以实现跨平台的动态调试，广泛应用于Andriod 、iOS 、Windows 、Linux等几乎全平台的应用程序调试。  

因frida的使用门槛较低，为黑灰产所广泛使用。动态调试过程中只需将编写的脚本通过frida自带的工具注入到游戏进程中，就可以HOOK游戏内的关键函数，如游戏角色攻击力、生命值、游戏内胜负逻辑、投降判负逻辑等，且在使用过程中，无需分析被调试程序的源码。  

除了门槛较低的frida，常见的调试工具还有IDA。具备强大的静态分析能力与动态调试能力，甚至可以实现远程调试SO文件与直接调试伪代码，因此 IDA 工具常被黑产用来绕过游戏内现有的保护。  

![315_21](/assets/res/202103/ida调试so库.png)  
IDA远程调试SO库  

在游戏安全层面，想要对抗黑灰产的破解攻击，需要从加壳保护、反调试两方面入手。FairGuard针对的游戏被破解产生的安全问题，提供定制化解决策略，该保护方案已接入多款热门游戏并验证了出色的保护能力。  

反调试功能  

防止外挂作者对游戏进行调试，阻止对游戏的静态或动态分析，一旦检测到IDA/frida等调试分析工具，立即闪退。  

防破解功能  

FairGuard业界独家无API签名校验技术，对游戏的引擎与代码进行深度加密，并对游戏包签名和文件完整性进行多重校验，防止游戏被植入恶意模块、剔除广告等。  


**丨结语**  

FairGuard作为专注于游戏安全领域的第三方服务商，致力于帮助游戏公司解决外挂和破解问题，为游戏提供深度一体化的加密保护方案。  

目前产品已经被FunPlus、三七互娱、恺英网络、心动、杭州电魂等多家头部公司采用，接入400+款热门游戏。欢迎访问 [www.fair-guard.com](https://www.fair-guard.com) 了解试用。    

产品咨询联系方式：  

QQ：2079128588  

微信：fairguard01  

技术交流QQ群：1105310296  