---
layout: post
title: "iOS rootless无根越狱解决方案"
date: 2024-01-11 16:26:10 +0800
categories: 游戏安全
tags: iOS  rootless  无根越狱
---

据游戏工委数据统计，2023年国内游戏市场实际销售收入与用户规模双双创下新高，游戏普遍采用多端并发方式，成为收入增长的主因之一。<!-- more -->  

![315_21](/assets/res/202103/2023收入增长.png)  
中国市场实际销售收入及增长率丨数据来源：游戏工委  

多端互通既是机遇，也是挑战。从游戏安全的角度来看，多端互通意味着游戏将面临更为复杂、多样的外挂攻击，无论哪一端出现安全问题，在互通的情况下都会造成更加严重的影响。  

与开源的安卓系统相比，iOS系统独特的闭源生态下，硬件、软件和服务经过更为严格的审核与测试。所以，iOS端的作弊手段，总是在尝试绕过 App Store 的审查。  

![315_21](/assets/res/202103/iOS.png)  

常见的 iOS 游戏作弊，一般是通过各种手段将设备越狱后，获取操作系统的最高权限，再通过Cydia管理器等软件，绕过App Store的限制，同时运行未签名的软件包，给游戏外挂、破解提供便捷。  

传统的越狱模式为了获取高级用户权限，会重新安装文件系统并修改系统分区，导致越狱后设备无法正常更新，在运行中也会变得不稳定，想要还原设备需要经过一系列复杂操作，作弊成本较高。  

此外，传统越狱还会留下破坏文件系统映像、禁用签名检查等较为明显的作弊痕迹，在游戏安全对抗中，可以通过这些痕迹来判断设备是否处于越狱环境，作弊容易被检测。  

![315_21](/assets/res/202103/越狱.png)  
传统越狱作弊标志——安装Cydia管理器  

随着传统越狱的缺点越来越多，并且在技术上实现愈发困难，黑灰产发掘出了新的手段「rootless 无根越狱」。据观察，可实现 rootless 越狱工具十分多样，常见的有unc0ver工具、rootlessJB工具、Dopamine工具等。  

我们以 Dopamine 工具实现过程为例进行分析。其绕过 App Store 审查的方式采用了基于 CoreTrust 漏洞研发的 Trollstore 工具，该工具安装应用是通过ipa安装包，不需要证书，在非越狱环境也可以绕过 App Store ，实现随意安装外部应用。  

通过Trollstore工具，下载并安装Dopamine越狱工具，经过一系列设置，就可以为设备写入rootless越狱环境。从而为各类修改器、外挂提供便利，实现游戏作弊。  

![315_21](/assets/res/202103/多巴胺越狱.png)  
Dopamine越狱工具  

与传统越狱相比，rootless越狱不授予对文件系统根目录(“/”)的访问权限， 不会改变系统分区的内容，可以做到随时删除越狱环境，将系统复原。  

此外，rootless越狱在提供文件系统提取所需的所有内容时，不需要捆绑额外内容，作弊痕迹较少，具有隐藏越狱功能。这些“优势”使得 rootless 越狱得到黑灰产广泛的应用。  

![315_21](/assets/res/202103/多巴胺隐藏越狱.png)  
Dopamine越狱工具可隐藏、移除越狱  

针对iOS端面临的越狱、外挂等各类游戏安全难题，FairGuard研发了成熟完善的保护方案，并接入多款热门游戏并验证了出色的保护能力。  

▶ 反越狱保护  

多维度综合检测，如检查某些App的安装、文件的存在、目录的访问权限等来进行综合判断是否越狱。  

▶ 反调试保护  

双重防护，先使用ptrace、syscall、sysctl、异常等检测方式，再对防护代码进行加密保护，效果更佳。  

▶ 反重签名保护  

精准校验包体内签名，使用加固时存储的签名，与运行时获取的签名进行对比。  

▶ 反修改器保护  

在代码对抗防护阶段，FairGuard提供本地检测代码，并保护其有效性。  

此外，FairGuard研发了在线特征更新检测功能，获取样本后可第一时间下发特征，用最短的时间保护App的安全性。如下所示：  

![315_21](/assets/res/202103/App的安全性.png)  


**丨结语**  

FairGuard作为专注于游戏安全领域的第三方服务商，致力于帮助游戏公司解决外挂和破解问题，为游戏提供深度一体化的加密保护方案。  

目前产品已经被FunPlus、三七互娱、恺英网络、心动、杭州电魂等多家头部公司采用，接入400+款热门游戏。欢迎访问 [www.fair-guard.com](https://www.fair-guard.com) 了解试用。    

产品咨询联系方式：  

QQ：2079128588  

微信：fairguard01  

技术交流QQ群：1105310296  