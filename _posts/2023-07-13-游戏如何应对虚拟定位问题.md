---
layout: post
title: "游戏如何应对虚拟定位问题"
date: 2023-11-30 16:26:10 +0800
categories: 游戏安全
tags: 虚拟定位  gps  捉妖游戏
---

在游戏系统设计中，排行榜这一设计可谓是十分巧妙。它可以充分调动玩家的“胜负欲”，给予玩家前进的目标及动力，满足玩家的心理需求。<!-- more -->  

排行榜的设计使用范围广，对游戏留存、付费等指标提升效果出众，在不少游戏中都可以找到其身影。并且随游戏玩法不同，有众多分支，如：通关积分排行榜、使用率排行榜、异步排行榜及当下应用最广的局域排行榜。  

![315_21](/assets/res/202103/游戏排行榜.png)  
爆款游戏《羊了个羊中》的局域排行榜  

局域排行榜是指在排行榜设计中添加了更多的子类别，如地区排行、好友排行等。局域排行榜的排名不再是单纯的玩家之间进行排名，存在着更多的区域归属感、社交意义。而当游戏具备社交属性后，往往意味着更强的黏性。  

在玩家们为了冲击更高的排行榜目标时，黑灰产盯上了这块蛋糕，并甩出了冲击榜单的捷径——虚拟定位软件。  

![315_21](/assets/res/202103/王者荣耀位置模拟.png)  
通过虚拟定位获取排行榜名次的黑灰产  

这类软件可以通过各种手段/技术，篡改游戏获取到的定位信息，从而将使用软件的玩家从既定区域释放到排名竞争较小的地区。据观察，这类虚拟定位软件的实现方式十分多样，并且市场广阔。  

游戏应用想要获取位置信息，基本依赖于设备本身提供，这就给了黑灰产许多作弊空间，在不同的手机系统上，虚拟定位的实现手段十分多样。  

![315_21](/assets/res/202103/爱思助手修改定位.png)  
虚拟定位软件—爱思助手  

在iOS端，常见的虚拟定位的手段是——爱思助手。该软件自带虚拟定位功能，可以链接手机手动设置经纬度，实现虚拟定位。除此之外，iOS端实现虚拟定位还有其他三种手段：  

■ 使用Xcode，编辑GPX文件，调用设备中com.apple.dt.simulatelocation服务，写入经纬度。  

■ 通过硬件外设定位，比如:位移精灵，可发送虚拟定位数据来实现虚拟定位。  

■ 越狱设备中通过hook CLLocationManager中的定位代理方法，来实现虚拟定位。  

![315_21](/assets/res/202103/安卓模拟位置.png)  
Android获取模拟位置信息权限  

而Android端由于开源状态，系统本身自带开发者权限，Android 6.0及以上可以通过【开发者选项 → 选择模拟位置信息应用】来开放应用获取位置信息权限。这样一来，就可以通过篡改api接口信息、注入虚拟位置信息、伪造GPS定位信息等手段实现虚拟定位。  

![315_21](/assets/res/202103/gps修改定位.png)  
虚拟GPS软件  

玩家投入大量时间精力冲击排行榜获取的荣誉，而虚拟定位的出现，会大幅降低荣誉感的获取门槛，对正常玩家的积极性造成严重影响，从而影响游戏的收益、留存。  

除此之外，篡改游戏虚拟定位对于“捉妖”玩法手游，会造成严重影响。因游戏主要玩法就是基于定位系统，通过玩家不断改变物理位置游戏资源，虚拟定位的出现，会直接破坏游戏核心玩法的公平性。  

![315_21](/assets/res/202103/捉妖游戏案例.png)  
因游戏虚拟定位引发的诉讼案件  

某大厂旗下的捉妖玩法手游就曾被虚拟定位问题困扰，受该问题影响，游戏社区内出现大量玩家打出差评的退坑潮，对厂商的直接收益与游戏的生命周期均造成了无法挽回的严重损失。  

针对游戏面临的虚拟定位风险，FairGuard研发了成熟完善的保护方案，并接入多款热门游戏并验证了出色的保护能力。  

防地理位置篡改  

禁用地理位置模拟操作，防止LBS类型玩法的作弊。  

防注入功能  

禁止使用Xposed、Frida等各种外挂模块注入器，防止注入后修改游戏内存等各种恶意行为，一旦发现立即闪退。  


**丨结语**  

FairGuard作为专注于游戏安全领域的第三方服务商，致力于帮助游戏公司解决外挂和破解问题，为游戏提供深度一体化的加密保护方案。  

目前产品已经被FunPlus、三七互娱、恺英网络、心动、杭州电魂等多家头部公司采用，接入400+款热门游戏。欢迎访问 [www.fair-guard.com](https://www.fair-guard.com) 了解试用。    

产品咨询联系方式：  

QQ：2079128588  

微信：fairguard01  

技术交流QQ群：1105310296  